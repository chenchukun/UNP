## 传输层协议TCP和UDP

### 用户数据报协议（UDP）

​	UDP是一个简单的、无连接、不可靠的传输层协议，应用进程玩一个UDP套接字写入一个消息，该消息随后被封装到一个UDP数据报，该UDP数据报进而被封装到一个IP数据报，然后发完目的地。UDP不保证UDP数据报会到达最终目的地，不保证各个数据报达到目的地的先后顺序，也不保证每个数据报只到达一次。

​	每个UDP数据报后又一个长度，在数据报正确到达目的地后，长度会随数据传递给应用程序，而TCP是一个字节流协议，传输的数据是没有边界的，需要在应用层进行包处理。

### 传输控制协议（TCP）

####TCP概述

​	TCP提供了面向连接的，靠性的服务，与UDP相比，它具有确认、超时重传、流量控制、拥塞控制等机制。

​	TCP提供了面向连接的，靠性的服务，在两端进行通信前必须先建立连接，当TCP向另一端发送数据时，将启动一个定时器，它要求对端返回一个确认，如果在定时器超时后还没有收到确认，TCP就自动重传数据并等待更长时间。在数次重传失败后TCP才放弃。

​	当TCP接收到另一端TCP发来的数据后，将发送一个确认，这个确认不一定是立即发送的，通常将在推迟一段时候后发送。

​	TCP将保持她首部和数据的校验和，这是一个端到端的校验和，目的是检验数据在传输过程中的任何变化，如果收到端的校验和有差错，TCP将丢弃这个报文段并发送确认，等待发送端超时重传。

​	TCP并不保证数据一定会被对端接收,因为这是不可能做到的,如果有可能，TCP就将数据递送到对端，否则就通知用户。因此，TCP也不能被描述成是100%可靠的协议，它提供的是数据的可靠递送货故障的可靠通知。

​	TCP含有用于动态估算客户和服务器之间的往返时间(round-trip time, RTT)的算法,以便它知道等待一个确认需要多长时间。

​	TCP通过给其中的每个字节关联一个序列号对所发送的数据进行排序。若接收端接收到的数据非顺序到达,接收端TCP将先根据它们的序列化重新排序，再把结果数据传递给接收应用。若接收到了重复数据，它将根据序列号判定数据是重复的,从而丢弃重复数据。

​	TCP总是告知对端在任何时刻它一次能够从对端接收多少字节的数据,这称为通知窗口，在任何时刻，该窗口指出接收缓冲区当前可用的空间量,从而确保发送端发送的数据不会使接收缓冲区溢出。

`问题：若某一时刻接收端通知发送端当前接收缓冲区空间为0，此时发送端无法发送数据给接收端，假设接收端也不主动发送数据给发送端，那此时不是会造成发送端一直无法发送数据？`

#### TCP连接的建立和终止

